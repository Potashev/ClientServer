# ClientServer
**Описание.**
Данная система формирует работу сетевой топологии - передача данных с динамической маршрутизацией между узлами сети.
Узлы бывают двух типов: клиент и сервер.

**Сервер.**
Задача сервера сводится к аккумуляции пакетов данных, полученных от узлов, с которыми есть соединение согласно топологии (далее *соседи*). 
Также имеется возможность предварительного формирования структуры топологии.
Режимы работы сервера:
1. прием пакетов;
2. предварительное формирование топологии (опционально).

**Клиент.**
Клиент генерирует пакеты данных, а также формирует поток пакетов между соседними узлами (прием и отправление). Соответственно, соседи клиента подразделяются
на тех, кто присылает пакеты клиенту, и кому клиент отправляет данные дальше согласно топологии. Корректная структура топологии подразумевает,
что у каждого клиента число соседей на прием >=0 и на передачу >=1, так, чтобы маршрут прохождения всякого пакета заканчивался на сервере.
Если соседей на передачу данных >1, осуществляется *маршрутизация* передачи данных.

**Маршрутизация.**
Топология подразумевает, что при наличии нескольких путей отправки, клиенту предоставляется выбор, куда передать пакет дальше. 
Этот выбор формируется приоритетностью путей.
На начальном этапе этапе передача устанавливается с максимальным приоритетом (наиболее оптимальный вариант). В случае неудачного отправления, клиент ищет альтернативный путь.
Если альтернативный путь найден, клиент начинает отправлять пакеты новому соседу. При этом запускается параллельная проверка "мертвых" узлов и, в случае восстановления, пакеты
перенаправятся на восстановленный сигнал. Если восстановленный сигнал оптимальный, проверка завершается.

**Сообщения.**
Передача данных осуществляется сообщениями, каждое из которых содержит множество пакетов данных. В отрезок времени между принятием сообщения клиентом 
и его отправкой дальше по сети может произойти генерация собственных пакетов, которые будут либо добавлены в очередь для последующего отправления, 
либо добавлены в полученное клиентом сообщение (зависит момента генерации пакета).

**Формирование топологии.** Процедура  введена для удобства демонстрации работы системы, когда все узлы-клиенты подкючаются к серверу,
на котором происходит ввод структуры топологии и отправка клиентам.
После чего соединение с сервером завершается и дальнейшие соединения каждый клиент устанавливает в соответствии с полученной топологией.

**Запуск.**
При первом запуске необходимы следующие файлы:
Сервер.
- Исполняемый файл ServerApp.exe
- Библиотека классов ClientServerLibriary.dll

Клиент.
- ClientApp.exe
- Библиотека классов ClientServerLibriary.dll
- Текстовый файл serverip.txt, содержащий ip сервера (создается вручную)

Для удобства демонстрации предусмотрена *возможность развертывания системы на одной машине* (используется распределение портов).
